def reposDir = new File(System.properties['user.home'], ".android/manual-offline-m2")
def repos = new ArrayList()
reposDir.eachDir {repos.add(it) }
repos.sort()

allprojects {
  buildscript {
    repositories {
      for (repo in repos) {
        maven {
          name = "injected_offline_${repo.name}"
          url = repo.toURI().toURL()
        }
      }
    }
  }
  repositories {
    for (repo in repos) {
      maven {
        name = "injected_offline_${repo.name}"
        url = repo.toURI().toURL()
      }
    }
  }
}
```

3. Save the text file.
4. (Optional) If you’d like to verify that the offline components are working as
   intended, remove the online repositories from your project’s `build.gradle`
   files, as shown below. After you’ve confirmed that your project builds
   correctly without these repositories, you can put them back into your
   `build.gradle` files.

```
buildscript {
    repositories {
        // Hide these repositories to test your build against
        // the offline components. You can include them again after
        // you’ve confirmed that your project builds ‘offline’.
        // google()
        // jcenter()
    }
    …
}
allprojects {
    repositories {
        // google()
        // jcenter()
    }
    ...
}

